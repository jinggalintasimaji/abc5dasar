<div id="tabs_{$main}" style="width:500px;height:285px;">
    <div title="Profitability" style="padding:10px;">
		<form method='post' url="{$host}homex/simpansavedata/tbl_prm" id="form_{$main}_{$acak}" enctype="multipart/form-data">			
			<input type='hidden' id='id_prm' name='id' value="{$data.id|default:''}">
			<input type='hidden' name='editstatus' value="{$editstatus}">
			<input type='hidden' id='bulan_costobject' value="{$bulan}">
			<input type='hidden' id='tahun_costobject' value="{$tahun}">
			<input type='hidden' id='net_revenue_bener' value="{$data.net_revenue_bener|default:''}">
			<input type='hidden' id='direct_cost_bener' value="{$data.direct_cost_bener|default:''}">
			<input type='hidden' id='prod_qty_bener' value="{$data.prod_qty_bener|default:''}">
			<input type='hidden' id='target_qty_bener' value="{$data.target_qty_bener|default:''}">
			<input type='hidden' id='activity_cost_bener' value="{$data.total_cost_driver_bener|default:''}">
			
			<fieldset>
			<legend>Profit Detail</legend>
				<table width='100%'>
					<tr>
						<td width='50%'>
							{include file='template/input_form.html' size='sedang' type='text' tampilan='label' label='Service ID' name='prod_id' value={$data.prod_id|default:''} }
							{include file='template/input_form.html' size='sedang' type='text' tampilan='label' label='Service Name' name='descript' value={$data.descript|default:''} }
						</td>
						<td width='50%' valign='top'>
							{include file='template/input_form.html' size='sedang' type='select' tampilan='label' label='Month' name='bulan' option={$bulan_form} } 
							{include file='template/input_form.html' size='sedang' type='select' tampilan='label' label='Year' name='tahun' option={$tahun_form} } 						
						</td>
					</tr>
				</table>
				<table width='100%' style='margin-top:10px;'>
					<tr>
						<td width='50%'>							
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Revenue' class='duit' name='revenue' value={$data.revenue|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Reduction' class='duit' name='reduction' value={$data.reduction|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Net Revenue' class='duit' name='net_revenue' value={$data.net_revenue|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Direct Cost' class='duit' name='direct_cost' value={$data.direct_cost|default:''} }
							<label style='width:150px'>Activity Cost</label> : Rp. <span id='activity_cost'>{$total_cost_driver|default:'0'}</span> <br/>
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='ABC Cost' class='duit' name='abc_cost' value={$data.abc_cost|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Profit Lost' class='duit' name='profit_lost' value={$data.profit_lost|default:''} }
						</td>
						<td width='50%'>
							{include file='template/input_form.html' size='sedang' type='select' tampilan='label' label='Segment' name='segment_id' option={$segment_id} }
							{include file='template/input_form.html' size='sedang' type='select' tampilan='label' label='Service Group' name='service_group_id' option={$service_group_id} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Quantity of Production' class='duit' name='prod_qty' value={$data.prod_qty|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Unit Of Measurement' name='uom' value={$data.uom|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Cost Rate' class='duit' name='cost_rate' value={$data.cost_rate|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Target Quantity' class='duit' name='target_qty' value={$data.target_qty|default:''} }
							{include file='template/input_form.html' size='kecil' type='text' tampilan='label' label='Target Rate' class='duit' name='target_rate' value={$data.target_rate|default:''} }
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
    </div>
	{if $editstatus eq 'edit'}	
    <div title="Cost Driver" style="overflow:auto;padding:10px;">
		<table width='100%' style='margin-bottom:20px;'>
			<tr>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Service ID</label> : {$data.prod_id|default:''}
					<br/>
					<label style='width:100px;'>Service Name</label> : {$data.descript|default:''}
					<br/>
				</td>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Month</label> : <span class='monthhsss'></span>
					<br/>
					<label style='width:100px;'>Year</label> : <span class='yearrsss'></span>
				</td>
			</tr>
		</table>
		{include file='template/grid_editable.html' crud_table='tbl_prd_costobject' main='assign_act_costobject' mod={$mod} button_2='true' filter_core='false' tinggi_grid='265px' tinggi_toolbar='30px'}
		<div style='margin-top:3px;border: 1px solid #48A2CA;'>
			<table width='100%'>
				<tr>
					<td width='50%'>
						&nbsp;
					</td>			
					<td width='50%'>
						<table width='100%'>
							<tr>
								<td width='50%'><b>TOTAL COST</b></td>
								<td width='50%'><b>Rp. <span id='total_costdriver_costobject'>{$total_cost_driver}</span></b></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>    
	</div>
    <div title="Customer" style="overflow:auto;padding:10px;">
		<table width='100%' style='margin-bottom:20px;'>
			<tr>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Service ID</label> : {$data.prod_id|default:''}
					<br/>
					<label style='width:100px;'>Service Name</label> : {$data.descript|default:''}
					<br/>
				</td>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Month</label> : <span class='monthhsss'></span>
					<br/>
					<label style='width:100px;'>Year</label> : <span class='yearrsss'></span>
				</td>
			</tr>
		</table>
		{include file='template/grid_editable.html' crud_table='tbl_cust_costobject' main='assign_cust_costobject' mod={$mod} button_2='true' filter_core='false' tinggi_grid='265px' tinggi_toolbar='30px'}
		<div style='margin-top:3px;border: 1px solid #48A2CA;'>
			<table width='100%'>
				<tr>
					<td width='50%'>
						&nbsp;
					</td>			
					<td width='50%'>
						<table width='100%'>
							<tr>
								<td width='50%'><b>TOTAL COST</b></td>
								<td width='50%'><b>Rp. <span id='total_customer_costobject'>{$total_customer}</span></b></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>    
    </div>
    <div title="Location" style="overflow:auto;padding:10px;">
		<table width='100%' style='margin-bottom:20px;'>
			<tr>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Service ID</label> : {$data.prod_id|default:''}
					<br/>
					<label style='width:100px;'>Service Name</label> : {$data.descript|default:''}
					<br/>
				</td>
				<td width='50%' valign='top'>
					<label style='width:100px;'>Month</label> : <span class='monthhsss'></span>
					<br/>
					<label style='width:100px;'>Year</label> : <span class='yearrsss'></span>
				</td>
			</tr>
		</table>
		{include file='template/grid_editable.html' crud_table='tbl_loc_costobject' main='assign_loc_costobject' mod={$mod} button_2='true' filter_core='false' tinggi_grid='265px' tinggi_toolbar='30px'}
		<div style='margin-top:3px;border: 1px solid #48A2CA;'>
			<table width='100%'>
				<tr>
					<td width='50%'>
						&nbsp;
					</td>			
					<td width='50%'>
						<table width='100%'>
							<tr>
								<td width='50%'><b>TOTAL COST</b></td>
								<td width='50%'><b>Rp. <span id='total_location_costobject'>{$total_location}</span></b></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>    
    </div>
	{/if}	
</div>
<div style='margin-top:5px;'>
	<a href="javascript:void(0)" style='float:right;' class="l-btn l-btn-small l-btn-plain" group="" id="btnCancel_costobject" onClick="">
		<span class="l-btn-left l-btn-icon-left">
			<span class="l-btn-text">Back To List</span><span class="l-btn-icon icon-remove">&nbsp;</span>
		</span>
	</a>	
	&nbsp;&nbsp;&nbsp;			
	<a href="javascript:void(0)" style='float:right;' class="l-btn l-btn-small l-btn-plain" group="" id="btnSimpan_costobject" onClick="">
		<span class="l-btn-left l-btn-icon-left">
			<span class="l-btn-text">Save Data</span><span class="l-btn-icon icon-save">&nbsp;</span>
		</span>
	</a>
</div>

<script>
	$(document).ready(function() {
		$(".duit").maskMoney( 'mask' );
		$(".duit").maskMoney( { precision:0, thousands:'.', allowNegative:true } );
	} );

	$('.monthhsss').html($('#bulan option:selected').text());
	$('.yearrsss').html($('#tahun option:selected').text());
	
	$('#segment_id').on('change', function(){
		fillCombo(host+'homex/getcombo/service_group_id/', 'service_group_id', '', $(this).val() );
	});
	
	$("#tabs_{$main}").tabs({
		height: getClientHeight()-190,
		width: getClientWidth()-280,
		plain: false,
		fit:true
	});
	
	$('#btnSimpan_costobject').on('click',function(){
		loadingna();
		submit_form('form_{$main}_{$acak}',function(r){
			if(r==1){
				$.messager.alert('ABC System', "Data Was Saved", 'info');
			}else{
				$.messager.alert('ABC System', "Data Not Saved", 'error');
				console.log(r);
			}
			
			$('#detil_nya_cost_object').html('');
			$('#detil_nya_cost_object').hide();
			$('#grid_nya_cost_object').show();
			$('#grid_cost_object').datagrid('reload');
			
			winLoadingClose();
		});
		return false;
	});
	
	$('#btnCancel_costobject').on('click',function(){
			$('#detil_nya_cost_object').html('');
			$('#detil_nya_cost_object').hide();
			$('#grid_nya_cost_object').show();
			$('#grid_cost_object').datagrid('reload');
		return false;
	});
	

</script>
